<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="description" content="Projects : A single space for Documentation of all Projects.">

    <link rel="stylesheet" type="text/css" media="screen" href="../stylesheets/stylesheet.css">

    <title>Projects</title>
  </head>
  <body>
<!-- HEADER -->
<div id="header_wrap" class="outer">
  <header class="inner">
    <a id="forkme_banner" href="https://github.xpo.com/mohit-kumar001/Project-Documentations">View on GitHub</a>

    <h1 id="project_title">Dwell Time</h1>
    <h2 id="project_tagline">Dwell time is the amount of time spent at a location in a trip not covering distance between locations(SIC to SIC or SIC to customer location or vice versa) on open highway/road, where location can be a service center of XPO or a customer(shipper/consignee) location which can be due to a driver waiting for the shipper to load the goods or for a consignee to unload the goods or at a service center waiting for service center operations to be completed.</h2>

  </header>
</div>


<div id="main_content_wrap" class="outer">
  <section id="main_content" class="inner">
    <h1>
      <a id="Calculation" class="anchor" href="#Calculation" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Calculation</h1>
      <p>Dwell time is calculated separately for pickup-delivery operations and for spotted(Spot empty-hook load/ spot load-hook empty operations) equipment. Both calculations are explained below,</p>
      <ol>
        <li>Dwell time for pickup-delivery is calculated by subtracting the Departure time of the driver from the Arrival time of the driver at a location(Shipper/Consignee/SIC).</li>
        <li>Dwell time for spotted/dropped equipment is calculated on the basis of the time spent by the equipment at the customer location(between spotting and hooking). Spotted for loading has a different method of dwell time calculation than spotted for unloading which is explained under the sub-heading of Free time under Detention without Power.</li>
      </ol>
      <h1>
      Accessorials
      </h1>
      <p>Some free time is allowed based on the weight of the shipment or in case of multiple shipments, then, on the basis of their combined weight, which is empirically calculated keeping in mind the usual operation duration of that weight category of shipments. Anything above the permissible time is charged to either the Shipper or Consignee, based on whether it was loading operation or unloading operation respectively, in the form of accessorial under the name of “Detention” which can be “With Power” or “Without Power” and is explained below,</p>
      <h2>Detention With Power</h2>
      <p>Detention with Power generally applies in instances where shipment is being picked up from a Shipper or shipment is being delivered to a Consignee. Other cases can be when a power equipment is dropped/spotted at a customer location or the time taken (dwell time) right from the time driver arrived at the premises of the shipper or Consignee in hooking/picking up a spotted trailer/equipment exceeds 30 minutes.</p>
      <h3>Free time</h3>
      <p>Free time per vehicle per stop is as follows:</p>
      <table>
        <tr>
          <td>Actual Weight of shipment(s)</td>
          <td>Free Time(in minutes)
      
          </td>
          
        </tr>
        <tr>
          <td>< 1000
      
          </td>
          <td>15</td>
          
        </tr>
        <tr>
          <td>1000 <= Weight <= 4999
          </td>
          <td>30</td>
        </tr>
        <tr>
          <td>1000 <= Weight <= 4999
          </td>
          <td>30</td>
        </tr>
        <tr>
          <td>5000 <= Weight <= 9999
          </td>
          <td>40</td>
        </tr>
        <tr>
          <td>10000 <= Weight
          </td>
          <td>60</td>
        </tr>
      </table>
      <h3>Charges</h3>
      <p>Charges are as follows,
      </p>
      <ol>
        <li>Time taken over the Free time is charged in tranches of 15 minutes where each tranche of 15 minutes, or fraction thereof, will be charged $55.25. Minimum charge is $73.75.</li>
        <li>Amount due under Power Detention accessorial will be charged to Shipper in case of loading, and against the Consignee in the case of unloading, irrespective of whether the line haul charges are Prepaid or Collect.</li>
      </ol>
      <h3>General Provisions</h3>
      <ol>
        <li>When a vehicle is both loaded and unloaded at a location, each of the operations of loading and unloading are treated as separate and have their own Free time and if exhausted, then, Power Detention accessorials, unless, when loading is begun before unloading is completed. Free time of loading will not begin until free time of unloading has expired.
        </li>
        <li>Dwell time is calculated from the time when a driver enters a customer location till the time the driver leaves the customer location(thus, geofencing is required of customers).
        </li>
        <li>If loading/unloading is interrupted for a normal meal period, meal time(not more than 1 hour) will be excluded from the dwell time calculation thus time calculation for Detention with Power accessorial.
        </li>
        <li>When Carrier is permitted to work before or after the normal business day, such working time shall also be included.
        </li>
        <li>If there are more than one shipment to be picked up from a Shipper or to be delivered to a Consignee in a trip, then, combined weight of shipments is used for estimation of free time.
        </li>
        <li>The provisions and charges for detention of vehicle with power units will also apply to equipment owned by steamship lines, railroads, or third party leasing companies.
        </li>
      </ol>
      
      
      <h2>Detention without Power
      </h2>
      <p>Detention without Power applies to the instances when equipment/ Carrier’s vehicles without power units are detained or delayed at the customer location. Details of Equipment without power can be obtained from table ‘ltl-prd-datahub.ALL_DATAHUB_VIEW.UFO_TRIP_EQUIPMENT_VW’ wherein ‘EQP_TYP’ tells us what type of equipment (Dolly, Trailer, Power or Straight Truck) we’re talking about.
      </p>
      <h3>
      Free Time</h3>
      <p>Spotted/Dropped trailer is allowed 1 calendar day of free time for loading or unloading and the dwell time will be calculated till the time the customer notifies the carrier(XPO) that the loading/unloading operation has been completed and the trailer is ready to be picked up, however, starting point of calculation of time varies between loading and unloading operations which is explained below,
      </p>
      <ol>
        <li><b>Unloading-</b> For trailers spotted for unloading, dwell time calculation commences at the end of the day when the trailer is placed by Carrier at the site of the customer(Shipper or Consignee or any site designated by the customer). 
      
        </li>
        <li><b>Loading-</b> For trailers spotted for loading, dwell time calculation starts from the time the trailer is spotted at the site of the customer(Shipper or Consignee or any site designated by the customer).
      
        </li>
        
      </ol>
      <h3>
        Charges</h3>
        <p>For each day or fraction thereof following the Free time of 1 day in case of Detention without Power, <b>$158.50</b> are charged.<br>
          If Carrier’s employee assists in loading, unloading, or checking the freight, charges pertaining to detention with power will apply.<br>
          When hooking/picking up spotted equipment from a customer location takes less than 30 minutes, right from the time driver enters the customer location to the time driver leaves the customer location(Dwell time), no additional charges are applied in addition to what may be applicable for the dwell time of spotted equipment. Else, if it takes more than 30 minutes, then charges under Detention with Power are applicable.
          </p>
          <h3>
            General Provisions
      </h3>
      <ol>
        <li> Detention charges are assessed against Shipper in case of spotting/dropping for loading and against the Consignee in the case of spotting/dropping for unloading irrespective of whether charges are prepaid or collect.
      
        </li>
        <li>Carrier is not required to pickup or deliver spotted trailers at hours other than Carrier’s business hours(there’s a separate accessorial for that I reckon).
      
      
        </li>
        <li>The provisions and charges for detention of vehicle with power units will also apply to equipment owned by steamship lines, railroads, or third party leasing companies.
      
      
      
        </li>
        
      </ol>
      <h1>
        Data/Tables
        </h1>
        <ul>
          <li>UFO_TRIP_VW 
        
          </li>
          <ul>
            <li>Contains trip level information like trip instance number(unique identifier), Origin SIC, Destination SIC, type of trip(City or Dispatch), trip date, tractor number along with tractor prefix text and suffix number, trip category, trip status(dispatched, returned, completed or cancelled), number of miles driven during that trip, etc.
            </li>
            <li>Some of the identified useful fields in the table are  TRP_INSTC_NBR,  TRP_TYP,  TRP_ORIG_SIC_CD,  TRP_DEST_SIC_CD,  TRP_ORIG_APPL_NODE_INSTC_NBR,  TRP_ORIG_NODE_TYP,  TRP_DEST_APPL_NODE_INSTC_NBR,  TRP_DEST_NODE_TYP,  TRAC_NBR,  TRAC_PFX_TXT,  TRAC_SFX_NBR,  TRP_DT,  TRP_CATG_CD,  TRP_STAT_CD,  CALC_ACTL_DRVN_MILE,  EST_DLVR_CMPLTN_DTTM_LCL,  HSS_IND,  ACTL_DISP_DTTM_LCL, ACTL_ARIV_DTTM_LCL.
            </li>
          </ul>
          <li>UFO_TRIP_ACTIVITY_VW
          </li>
          <ul>
            <li>Contains information about trip level activities which are not at node level(lunch start, lunch end or other activity start, other activity end), timestamp of activity, sequence of activities, odometer reading at activity execution, etc.
            </li>
            <li>Some of the identified useful fields in the table are TRP_INSTC_NBR, TRP_TYP, ACTVTY_TYP, ACTVTY_SEQ_NBR, ACTL_ACTVTY_DTTM_LCL, ODO_NBR.
            </li>
          </ul>
          <li>UFO_TRIP_NODE_VW
          </li>
          <ul>
            <li>Contains information about Nodes on the trip like sequence number of node on trip, location instance number(for SIC) or customer number(for customer location), node type(customer location, drop location, cartage agent), node sic code(sic under which node is located), driver triggered coordinates(through handheld device), role of the node(origin, destination or stop), suggested and actual execution sequence number of nodes, estimated arrival through both mapping software and ESRI API, and estimated departure time through mapping software along with actual arrival and departure times as reported by driver, delay in minutes, reason for delay in arrival or departure, estimated miles from previous and to next node, estimated Dwell time, etc.
      
            </li>
            <li>Some of the identified useful fields in the table are TRP_INSTC_NBR, TRP_TYP, TRP_NODE_SEQ_NBR, NODE_APPL_INSTC_NBR, NODE_TYP, NODE_SIC_CD, AREA_INSTC_NBR, DRVR_TRIGGRD_NODE_LATD, DRVR_TRIGGRD_NODE_LNGT, TRP_NODE_ROL_TYP, NODE_BYPASSED_IND, NODE_SUGG_EXEC_SEQ_NBR, NODE_ACTL_EXEC_SEQ_NBR, EST_DISTN_FRM_PREV_NODE_MILE, EST_ARIV_DTTM_PDX, EST_DISP_DTTM_PDX, ARIV_LT_RSN_CD, DISP_LT_RSN_CD, DELAY_IN_MNS, ACTL_ARIV_DTTM_PDX, ACTL_DISP_DTTM_PDX, CALC_EST_ARIV_TMST_PDX, ODO_NBR, CALC_ACTL_DRVN_MILE_TO_NXT_NOD, CALC_EST_MILE_TO_NEXT_NODE, CALC_EST_DWELL_TM_MNS
      
            </li>
          </ul>
          <li>UFO_TRIP_NODE_ACTVTY_VW
          </li>
          <ul>
            <li>Contains information about activities performed at Node level like node activity code, node activity sequence number, shipment instance id(can be used to get information about accessorials from accessorial_vw, amongst other things), unique identifier of route, etc.
      
            </li>
            <li>Some of the identified useful fields in the table are TRP_INSTC_NBR, TRP_TYP, TRP_NODE_SEQ_NBR, TRP_NODE_ACTVTY_SEQ_NBR, TRP_NODE_ACTVTY_CD, SHPMT_INSTC_ID, RTE_INSTC_NBR, RTE_SHPMT_SEQ_NBR, PKUP_RQST_INSTC_ID, PKUP_RQST_LN_SEQ_NBR, TRP_NODE_SHPMT_EVNT_TYP, FRT_STAT_SHRT_DESC, ACTL_ACTVTY_DTTM_LCL, STAT_CD.
      
            </li>
          </ul>
          <li>UFO_VEH_ACTVTY_STP_MTRC_VW
          </li>
          <ul>
            <li>EOBR timestamps for arrival and departure can be extracted from this table for correction of driver triggered arrival and departure times.
      
            </li>
            
          </ul>
          <li>CUSTOMER_HIERARCHY_VW
          </li>
          <ul>
            <li>For obtaining customer/parent data like customer number, mad code, name, address, city, state, zip4/6, country, type of customer, coordinates of the customer/parent.
      
            </li>
            
          </ul>
          <li>NWK_NETWORK_NODE_VW
          </li>
          <ul>
            <li>Can be used to obtain information like customer number, coordinates, street address, city name, state, country, postal code about the nodes we encounter on our trips.
      
            </li>
            
          </ul>
          <li>UFO_TRIP_NODE_REFINED_STOP_TIME_AI
      
          </li>
          <ul>
            <li>Populated by Brian’s SQL for DWP(Detention With Power) Accessorial. It factors in all the above table’s data and more to create a holistic view of the trips, nodes visited, corresponding addresses, SIC codes, trip dates with driver provided arrival and departure times as well as EOBR ones, thus, corresponding Dwell times, then, it provides a suggested arrival and departure time as we discussed above that driver provided times might not be correct, historical dwell times are also maintained, overlapped lunch times with dwell times, allowed/free dwell time, whether or not nodes were merged during the trip, number of shipments involved on a activity in a node on a trip amongst other important derived columns. Finally it also provides a Confidence index and Confidence percentage denoting how confident are we with our Dwell time prediction.
      
      
            </li>
            
          </ul>
        </ul>
      <h1>Previous Work
      </h1>
      <p>Below are the links for github repos and reports containing EDA over Dwell time or related accessorials,
      </p>
      <ul>
        <li>OPS061 Accessorials - Detention with Power
      
        </li>
        <ul>
          <li><h3><a href="https://xpologisticsprod.cloud.looker.com/dashboards-next/tYznX7BmSo6rXwpXVdRTeD?Trip%20Date=last%20week&%20%20Region=&%20District=&SIC=&Stop%20Name=&Driver%20Name=&Excess%20Time%20(mins)=&Excess%20Time%20%25=&PA%20Parent%20Cust%20MAD%20Code=&PA%20Cust%20MAD%20Code=&Trip%20Date:%20for%20Stops%20Billed%25%20Map=last%20month" ></a>link</h3>
      
      
          </li>
          
        </ul>
        <li>DS - PND Customer Dwell Time
          <ul>
            <li><h3><a href="https://xpologisticsdev.cloud.looker.com/folders/395" ></a>link</h3>
        
        
            </li>
            
          </ul>
        </li>
        <li>Ltl-python-pnd-dwell-time
        </li>
        <ul>
          <li><h3><a href="https://github.xpo.com/OneXPO/ltl-python-pnd-dwell-time/tree/master/notebooks/eda" >link</a></h3>
      
      
          </li>
          
        </ul>
      </ul>
      </section>
</div>
  </body>
</html>
